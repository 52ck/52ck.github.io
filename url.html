<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>URL Redirector</title>
</head>
<body>
    <h1>URL Redirector</h1>

    <script>
        // 定义要检查的多个地址以及它们的映射关系
        const urlsToCheck = {
            "http://www.0vzf.cn/": "http://example.com/normal",
            "http://www.example.com/nonexistent": "http://example.com/normal"
        };

        // 函数来检查一个地址
        async function checkUrl(originalUrl, mappedUrl) {
            const fullUrl = `http://mp.weixinbridge.com/mp/wapredirect?url=${originalUrl}&action=appmsg_redirect&uin=&biz=MzUxMTMxODc2MQ==&mid=100000007&idx=1&type=1&scene=0`;

            try {
                const response = await fetch(fullUrl, {
                    headers: {
                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36'
                    }
                });

                const responseBody = await response.text();
                // 如果响应内容包含 "已停止访问该网页"，则进行页面重定向到映射地址
                if (responseBody.includes("已停止访问该网页")) {
                    window.location.href = mappedUrl;
                }
            } catch (error) {
                // 处理可能发生的异常
                console.error(error);
            }
        }

        // 并行处理多个地址的检查
        async function checkUrlsParallel() {
            const promises = [];

            for (const [originalUrl, mappedUrl] of Object.entries(urlsToCheck)) {
                promises.push(checkUrl(originalUrl, mappedUrl));
            }

            await Promise.all(promises);
        }

        // 调用并行处理函数
        checkUrlsParallel();
    </script>
</body>
</html>
